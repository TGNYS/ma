-- 客户端脚本 (StarterPlayerScripts/AnnouncementGUI.lua)
local Player = game:GetService("Players").LocalPlayer
local PlayerGui = Player:WaitForChild("PlayerGui")
local ReplicatedStorage = game:GetService("ReplicatedStorage")

-- 创建GUI
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "AnnouncementGui"
screenGui.Parent = PlayerGui

local frame = Instance.new("Frame")
frame.Size = UDim2.new(1, 0, 0.15, 0)
frame.Position = UDim2.new(0, 0, 0.1, 0)
frame.BackgroundTransparency = 1
frame.Parent = screenGui

local textLabel = Instance.new("TextLabel")
textLabel.Size = UDim2.new(1, 0, 1, 0)
textLabel.BackgroundTransparency = 0.7
textLabel.BackgroundColor3 = Color3.new(0, 0, 0)
textLabel.Font = Enum.Font.GothamBold
textLabel.TextScaled = true
textLabel.TextColor3 = Color3.new(1, 1, 1)
textLabel.TextStrokeTransparency = 0.5
textLabel.TextStrokeColor3 = Color3.new(0, 0, 0)
textLabel.Visible = false
textLabel.Parent = frame

-- 监听公告事件
local announceEvent = ReplicatedStorage:WaitForChild("AnnounceEvent")

announceEvent.OnClientEvent:Connect(function(message, duration, color)
    -- 更新公告内容
    textLabel.Text = message
    textLabel.TextColor3 = color
    textLabel.BackgroundColor3 = Color3.new(0, 0, 0)
    
    -- 显示公告
    textLabel.Visible = true
    
    -- 创建动画效果
    local tweenService = game:GetService("TweenService")
    local fadeIn = tweenService:Create(
        textLabel,
        TweenInfo.new(0.5, Enum.EasingStyle.Quad),
        {BackgroundTransparency = 0.3}
    )
    fadeIn:Play()
    
    -- 等待显示时间
    task.wait(duration)
    
    -- 淡出效果
    local fadeOut = tweenService:Create(
        textLabel,
        TweenInfo.new(1, Enum.EasingStyle.Quad),
        {BackgroundTransparency = 1, TextTransparency = 1}
    )
    fadeOut:Play()
    
    fadeOut.Completed:Wait()
    textLabel.Visible = false
    textLabel.BackgroundTransparency = 0.7
    textLabel.TextTransparency = 0
end)